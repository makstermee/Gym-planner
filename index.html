<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Gym Planner Pro</title>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div id="splashScreen">
        <div class="spinner"></div>
        <h2 style="margin-top:15px; font-weight:300;">Gym<span style="color:var(--primary)">Plan</span></h2>
    </div>

    <div id="toastContainer"></div>

    <header class="top-bar">
        <div class="logo">GymPlan <span id="appVersion">v3.0</span></div>
        <div id="syncIndicator" class="sync-status"><i class="fa-solid fa-cloud"></i></div>
    </header>

    <main id="appContainer">
        
        <section id="view-auth" class="view active">
            <div class="auth-content">
                <h1>Witaj ðŸ‘‹</h1>
                <p>Twoje treningi w jednym miejscu.</p>
                
                <form id="authForm">
                    <div class="input-box">
                        <i class="fa-solid fa-at"></i>
                        <input type="email" id="email" placeholder="Adres e-mail" required autocomplete="email">
                    </div>
                    <div class="input-box">
                        <i class="fa-solid fa-key"></i>
                        <input type="password" id="password" placeholder="HasÅ‚o (min. 6 znakÃ³w)" required autocomplete="current-password">
                    </div>
                    <button type="submit" class="btn-full btn-glow">Zaloguj / Zarejestruj</button>
                    <p id="authError" class="error-text"></p>
                </form>
            </div>
        </section>

        <section id="view-dashboard" class="view">
            <h2 class="page-title">TwÃ³j Plan</h2>
            <div id="daysGrid" class="grid-layout"></div>
        </section>

        <section id="view-editor" class="view">
            <div class="nav-header">
                <button class="btn-icon" onclick="app.navigate('view-dashboard')"><i class="fa-solid fa-arrow-left"></i> WrÃ³Ä‡</button>
                <h2 id="editorTitle">DzieÅ„</h2>
            </div>

            <div class="card editor-add-box">
                <input type="text" id="exName" placeholder="Nazwa (np. Åawka)">
                <div class="row">
                    <input type="number" id="exSets" placeholder="Serie" value="3">
                    <input type="number" id="exReps" placeholder="Powt." value="10">
                    <button id="btnAddEx" class="btn-action"><i class="fa-solid fa-plus"></i></button>
                </div>
            </div>

            <div id="editorList" class="scroll-list"></div>

            <div class="bottom-spacer"></div>
            <button id="btnStartWorkout" class="floating-action-btn">
                <i class="fa-solid fa-play"></i> ROZPOCZNIJ
            </button>
        </section>

        <section id="view-workout" class="view">
            <div class="workout-top">
                <div>
                    <span class="sub-label">TRENING</span>
                    <h2 id="workoutTitle">...</h2>
                </div>
                <div id="timerDisplay" class="timer">00:00:00</div>
            </div>

            <div id="workoutList" class="scroll-list"></div>

            <div class="bottom-actions">
                <button id="btnFinish" class="btn-full btn-danger">ZakoÅ„cz Trening</button>
            </div>
        </section>

        <section id="view-history" class="view">
            <h2 class="page-title">Historia</h2>
            <div id="historyList" class="scroll-list"></div>
        </section>

        <section id="view-profile" class="view">
            <h2 class="page-title">Profil</h2>
            <div class="card profile-info">
                <p>Zalogowany jako:</p>
                <strong id="userEmail" style="color:var(--primary)">...</strong>
                <br><br>
                <button id="btnLogout" class="btn-outline" style="width:100%">Wyloguj siÄ™</button>
            </div>
            <div class="card">
                <h3>Statystyki (ObjÄ™toÅ›Ä‡)</h3>
                <canvas id="statsChart"></canvas>
            </div>
        </section>

    </main>

    <nav class="bottom-nav" id="mainNav">
        <button data-target="view-dashboard" class="active">
            <i class="fa-solid fa-calendar"></i> Plan
        </button>
        <button data-target="view-workout" id="navWorkout" style="display:none; color:var(--accent)">
            <i class="fa-solid fa-dumbbell"></i> Trening
        </button>
        <button data-target="view-history">
            <i class="fa-solid fa-clock-rotate-left"></i> Historia
        </button>
        <button data-target="view-profile">
            <i class="fa-solid fa-user"></i> Profil
        </button>
    </nav>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCacBxUhSiqaaCBrmVVKluMHMs3iMpR_cA",
            authDomain: "pro-plan-e6f00.firebaseapp.com",
            databaseURL: "https://pro-plan-e6f00-default-rtdb.europe-west1.firebasedabase.app",
            projectId: "pro-plan-e6f00",
            storageBucket: "pro-plan-e6f00.firebasestorage.app",
            messagingSenderId: "887703996706",
            appId: "1:887703996706:web:b7363c891b41b7d4697d7b",
            measurementId: "G-1WTB0NNLEB"
        };

        const app = initializeApp(firebaseConfig);
        window.auth = getAuth(app);
        window.db = getFirestore(app);
    </script>
    <script type="module" src="app-pro.js"></script>
</body>
</html>
